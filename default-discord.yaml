# yq ea -iI 4 'select(fi==0) * select(fi==1)' config.yaml ../default_settings/default-discord.yaml

# Application service host/registration related details.
# Changing these values requires regeneration of the registration.
appservice:
    # Database config.
    database:
        # The database URI.
        #   SQLite: A raw file path is supported, but `file:<path>?_txlock=immediate` is recommended.
        #           https://github.com/mattn/go-sqlite3#connection-string
        #   Postgres: Connection string. For example, postgres://user:password@host/database?sslmode=disable
        #             To connect via Unix socket, use something like postgres:///dbname?host=/var/run/postgresql
        uri: postgres://discord_user:ir9Aeciehaeng4iqu5niQu7ohkooK7EeGhaiyoabahkeiquiya0euxie1zeecoof@localhost:5432/discord?sslmode=disable
# Bridge config
bridge:
    # The prefix for commands. Only required in non-management rooms.
    command_prefix: "!dd"
    # Displayname template for Discord users. This is also used as the room name in DMs if private_chat_portal_meta is enabled.
    # Available variables:
    #   .ID - Internal user ID
    #   .Username - Legacy display/username on Discord
    #   .GlobalName - New displayname on Discord
    #   .Discriminator - The 4 numbers after the name on Discord
    #   .Bot - Whether the user is a bot
    #   .System - Whether the user is an official system user
    #   .Webhook - Whether the user is a webhook
    displayname_template: {{or .GlobalName .Username}}{{if .Bot}} (bot)(DD){{else}} (DD){{end}}
    # Patterns for converting Discord media to custom mxc:// URIs instead of reuploading.
    # Each of the patterns can be set to null to disable custom URIs for that type of media.
    # More details can be found at https://docs.mau.fi/bridges/go/discord/direct-media.html
    media_patterns:
        # Should custom mxc:// URIs be used instead of reuploading media?
        enabled: true
        # Pattern for normal message attachments.
        attachments: mxc://juniiimoh.pp.ua/discord_attachments|{{.ChannelID}}|{{.AttachmentID}}|{{.FileName}}
        # Pattern for custom emojis.
        emojis: mxc://juniiimoh.pp.ua/discord_emojis|{{.ID}}.{{.Ext}}
        # Pattern for stickers. Note that animated lottie stickers will not be converted if this is enabled.
        stickers: mxc://juniiimoh.pp.ua/discord_stickers|{{.ID}}.{{.Ext}}
        # Pattern for static user avatars.
        avatars: mxc://juniiimoh.pp.ua/discord_avatars|{{.UserID}}|{{.AvatarID}}.{{.Ext}}
    # Localpart template of MXIDs for Discord users.
    # {{.}} is replaced with the internal ID of the Discord user.
    username_template: dd_{{.}}
